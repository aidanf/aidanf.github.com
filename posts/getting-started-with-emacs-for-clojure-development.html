<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Getting started with emacs for clojure development</title>
  <meta name="description" content="Emacs is a great tool for clojure development. In fact you often hear people raving about the marriage of emacs and clojure without any clear explanation of ...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://www.aidanf.net/posts/getting-started-with-emacs-for-clojure-development">
  <link rel="alternate" type="application/rss+xml" title="/aidanf/" href="http://www.aidanf.net/feed.xml">
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">/aidanf/</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="/about/">About</a>
          
        
          
          <a class="page-link" href="/contact/">Contact</a>
          
        
          
        
          
        
          
        
          
          <a class="page-link" href="/publications/">Publications</a>
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Getting started with emacs for clojure development</h1>
    <p class="post-meta"><time datetime="2014-10-03T00:00:00+01:00" itemprop="datePublished">Oct 3, 2014</time></p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>Emacs is a great tool for clojure development. In fact you often hear people raving about the marriage of emacs and clojure without any clear explanation of if or why it's better than any other editor that you could use for clojure development.</p><p>I'm not going to get into why emacs is good for clojure development here. The aim of this post is to help someone who is looking to try it get up and running quickly, so they can try it for themselves.</p><p>I'm assuming you already have emacs installed and <a href="/posts/getting-setup-with-clojure">clojure setup</a>. I won't go into the basics of using emacs here, but I'll outline a few of the features that you may find handy for working with clojure code.</p><h2>Emacs Live</h2><p>The quickest way to get your emacs up and running is to install <a href="https://github.com/overtone/emacs-live">emacs-live</a>. Emacs live is</p><blockquote>"An opinionated set of defaults for getting started with a specific focus on live coding with&nbsp;<a href="http://overtone.github.io/">Overtone</a><span style="font-size:16px">and&nbsp;</span><a href="http://github.com/quil/quil">Quil</a><span style="font-size:16px">." </span></blockquote><p><span style="font-size:16px">It provides an excellent default setup for working with clojure.</span></p><h2>Emacs Modes for clojure development</h2><p>Among the most important modes are <a href="https://github.com/clojure-emacs/clojure-mode">Clojure-mode</a> and <a href="http://www.emacswiki.org/ParEdit">Paredit</a> along with repl integration via <a href="https://github.com/clojure-emacs/cider">Cider</a>.</p><h3>Paredit</h3><p>One of the most common complaints I hear from people who haven't tried clojure is about the abundant parentheses and how difficult they are to manage. Managing and matching parentheses is really a problem for the text editor, not the programmer. If you have trouble with unmatched parentheses, then either your text editor is not up to the task or you're not using it correctly.</p><p>Paredit mode is an emacs mode that takes care of the minutiae of working with s-expressions. Some of the things it does for you include:</p><ul><li>Ensures your parentheses are always balanced. E.g. It won't allow you to create an opening bracket without the corresponding bracket, or it won't let you delete a single bracket - you have to delete the entire expression.&nbsp;</li><li>Lets you cut, paste, move etc s-expressions in their entirety. You can move the entire sub-tree of an expression somewhere else or wrap an entire expression with another one.</li></ul><p>If you've never used Paredit before, it can be a little off-putting. You need to move from thinking in terms of text-tokens to thinking in terms of expressions. Once you get used to it though, the parentheses that so many people are wary of fade into the background. They become easy to manage.</p><p>To get a feel for Paredit, lets edit a small clojure file and play around with the brackets.</p><p>Lets create a new clojure project...</p><script src="https://gist.github.com/aidanf/e54a8b6438a1b05e2452.js?file=terminal.sh"></script><p id="yui_3_17_2_1_1411661917196_162585"><br></p><p>...and then open the generated core.clj file.</p><script src="https://gist.github.com/aidanf/e54a8b6438a1b05e2452.js?file=core.clj"></script><p id="yui_3_17_2_1_1411661917196_164775">If you've setup emacs-live you should see the following list of active modes when you open this file:</p>

<p>
<img src="/images/pareditmode.png" alt="Active modes for a .clj file: Clojure, Undo-Tree, yas, VHl, AC, Paredit"/> <br/><b>Active modes for a .clj file: Clojure, Undo-Tree, yas, VHl, AC, Paredit</b>
</p>

<p>Now, try to delete a closing ")". You can't. Navigate to the opening "(" of the println form. Press C-k to delete it. Notice that it deletes the entire form, but not the entire line - the last ")" remains. Keep, pressing C-k - you can't delete that closing ")"!</p><p>Press C-y to paste the println form back to where it was. Now highlight the println form (Press C-space on the opening "(" and then move the cursor to the closing ")" ). Now if you enter an opening bracket "(" it will wrap that entire expression with brackets. There's a lot more stuff you can do with Paredit mode that facilitates working with lisp-forms - take some time to get comfortable with it.</p><h3>Clojure-mode</h3><p>This provides indentation, highlighting and navigation for your clojure code. You don't really need to learn to use it - just know that you need what it provides.</p><h3>Cider</h3><p>Cider provides a set of commands for starting and running a repl from emacs, and then sending code for evaluation to that repl. This is core to emacs clojure development. You get into a workflow of constantly evaluating and re-evaluating functions as you iterively develop them and incrementally build up a working program in the repl.&nbsp;</p><p>Let's continue with our example project from above and launch a repl from emacs.</p><p><code>M-x nrepl-jack-in</code> </p>

<p>will start a repl (This command may be cider-jack-in instead of nrepl-jack-in, depending on which version of cider you have installed). Once it's started you should be able to enter clojure code in the repl and see the results immediately.</p>

<p>Let's evaluate some of our clojure code in the repl. The handiest way to do this is <code>C-c C-e</code>. This will evaluate the previous form in the text window and print the results.</p>

<p>Lets navigate to the space just after the last closing ")". Now if you run <code>C-c C-e</code> you should see the results of evaluating that function in your status window i.e. (<code>#hello.core/foo</code>).</p>

<p>Now switch you the repl window and change to the hello.core namespace.</p>

<p><code>(ns hello.core)</code></p>

<p>You can now run the foo function from the repl.</p>

<p><code>(foo "Goodbye")</code></p>

<p>Let's say our foo function is broken and we want to debug it. We'll set x in the repl and then we can step into our function and evaluate the forms in the function individually.</p>

<p>In the repl enter </p>

<p><code>(def x "Broken")</code></p>

<p>Now go back to the core.clj file and navigate the cursor to the space after the closing bracket of the angle println form. If we press <code>C-c C-e</code> we should see "Broken Hello, World!"in the repl</p>

<p>This is a very simple example, but in this way we can step through functions evaluating forms, seeing what every form in a function evaluates to for a given input. We can re-evaluate a function at any time to update the code that the repl is running. This gives us a lot of power to inspect how our code is behaving and to interively build up a working program in the repl.</p>

<p>Here are a few more commands that are useful for interacting with the repl and evaluating code. You can find the full list of available commands in the <a href="https://github.com/clojure-emacs/cider#keyboard-shortcuts">cider documentation</a>.</p><table>
    <tr>
        <td colspan="2"><i>Buffer Shortcuts</i></td>
    </tr>

    <tr>
        <td><b>C-c C-e</b></td>
        <td>Evaluate the form preceding the cursor and print the result to the echo area</td>
    </tr>

    <tr>
        <td><b>C-c C-r</b></td>
        <td>Evaluate the highlighted region</td>
    </tr>

    <tr>
        <td><b>C-c M-n</b></td>
        <td>Switch the namespace of the repl buffer to the namespace of the current buffer</td>
    </tr>
    <tr>
        <td><b>C-c C-z</b></td>
        <td>Switch to the repl buffer (and back to previous buffer)</td>
    </tr>
    <tr>
        <td><b>C-c C-k</b></td>
        <td>Load (all) the current buffer</td>
    </tr>
    <tr>
        <td><b>C-c C-d</b></td>
        <td>Display the doc string for the symbol under the cursor</td>
    </tr>
    <tr>
        <td colspan="2"><i>Repl Shortcuts</i></td>
    </tr>
    <tr>
        <td><b>M-p</b></td>
        <td>previous repl command</td>
    </tr>
    <tr>
        <td><b>M-n</b></td>
        <td>next repl command</td>
    </tr>
    <tr>
        <td><b>Tab</b></td>
        <td>Autocomplete current symbol</td>
    </tr>
    <tr>
        <td><b>C-c C-z</b></td>
        <td>Back to previous buffer</td>
    </tr>
</table><p>So that's a very quick and basic tour of how to get started with emacs for clojure development. The best thing to do now is to jump in and start using emacs for editing clojure code, while at the same time reading the paredit and cider documentation and incorporating them into your workflow as you go along.</p><p>Â </p>

  </div>

</article>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">/aidanf/</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>/aidanf/</li>
          <li><a href="mailto:your-email@domain.com">your-email@domain.com</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/aidanf"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">aidanf</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/aidanf"><span class="icon icon--twitter"><svg viewBox="0 0 16 16"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">aidanf</span></a>

          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Aidan Finn's homepage. Musings on Swift, iOS, Ruby, Python, Clojure, Machine Learning etc
</p>
      </div>
    </div>

  </div>

</footer>


  </body>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-539512-1', 'auto');
  ga('send', 'pageview');
</script>

</html>
